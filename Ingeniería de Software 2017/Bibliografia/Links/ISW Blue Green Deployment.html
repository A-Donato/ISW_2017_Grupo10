<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
<title>BlueGreenDeployment</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<meta content = 'summary_large_image' name = 'twitter:card'></meta>

<meta content = '16665197' name = 'twitter:site:id'></meta>

<meta content = 'bliki: BlueGreenDeployment' property = 'og:title'></meta>

<meta content = 'https://martinfowler.com/bliki/BlueGreenDeployment.html' property = 'og:url'></meta>

<meta content = 'Blue-green deployment allows you to upgrade production software without downtime. You deploy the new version into a copy of the production environment and change routing to switch.' property = 'og:description'></meta>

<meta content = 'https://martinfowler.com/bliki/images/blueGreenDeployment/blue_green_deployments.png' property = 'og:image'></meta>

<meta content = 'martinfowler.com' property = 'og:site_name'></meta>

<meta content = 'article' property = 'og:type'></meta>

<meta content = '2010-03-01 09:25:00 -0500' property = 'og:article:modified_time'></meta>

<meta content = 'width=device-width, initial-scale=1' name = 'viewport'></meta>

<link href = '../bliki-entry.css' rel = 'stylesheet' type = 'text/css'></link>
</head>

<body><div id = 'banner' style = 'background-image: url("/banner.png"); background-repeat: no-repeat'>
 <a href = "https://martinfowler.com">
    <img class = 'name-logo' src = '/mf-name-white.png'/>
<!--[if lte IE 6]>
<img class = 'ie6-name-logo' src = '/mf-name-white-solid.png'/>
<![endif]-->
  </a>
  
  <div class = 'search'>
    <!-- SiteSearch Google -->
    <form method='GET' action="https://www.google.com/search">
      <input type='hidden' name='ie' value='UTF-8'/>
      <input type='hidden' name='oe' value='UTF-8'/>
      <input class = 'field' type='text' 
             name='q' size='15' maxlength='255' value=""/>
      <button class = 'button' type='submit' 
             name='btnG' value=" " title = "Search"/>
      <input type='hidden' name='domains' value="martinfowler.com"/>
      <input type='hidden' name='sitesearch' value=""/> 
      <input
          type='hidden' name='sitesearch' value="martinfowler.com"/>
    </form>
  </div>

<div class = 'menu-button navmenu-button'><a class = 'icon-bars' href = '#navmenu-bottom'></a></div>

<div class = 'main-navigation'><ul>
  <li><a href="/intro.html">Intro</a></li>
  <li><a href="/videos.html">Videos</a></li>
  <li><a href="/design.html">Design</a></li>
  <li><a href="/agile.html">Agile</a></li>
  <li><a href="http://refactoring.com">Refactoring</a></li>
  <li><a href="/faq.html">FAQ</a></li>
  <li>
    <p><a href="/aboutMe.html">About Me</a></p>

    <li class="navmenu-button"><p><a href="#bottom-navmenu">All Sections <span class="icon-bars" title="Menu" /></a></p></li>

    <li><p>
      <a href="http://www.thoughtworks.com" class="tw">ThoughtWorks</a>
</p></li>

    <li><p>
  <a href="/feed.atom" title="feed" class="icon-rss">
  </a>
 </p></li>

    <li><p>
  <a href="http://www.twitter.com/martinfowler" title="Twitter stream" class="icon-twitter">
  </a>
 </p></li>
  </li>
</ul>

</div>
</div>
<div class = 'div' id = 'top-navmenu'>
<ul class = 'navmenu'>
<li class = 'top-line'><a class = 'link-home' href = '/'>home</a>  <div class = 'search'>
    <!-- SiteSearch Google -->
    <form method='GET' action="https://www.google.com/search">
      <input type='hidden' name='ie' value='UTF-8'/>
      <input type='hidden' name='oe' value='UTF-8'/>
      <input class = 'field' type='text' 
             name='q' size='15' maxlength='255' value=""/>
      <button class = 'button' type='submit' 
             name='btnG' value=" " title = "Search"/>
      <input type='hidden' name='domains' value="martinfowler.com"/>
      <input type='hidden' name='sitesearch' value=""/> 
      <input
          type='hidden' name='sitesearch' value="martinfowler.com"/>
    </form>
  </div>

<span class = 'close' title = 'close'></span>
</li>

<li class = 'group'><span class = 'group-label'>topics</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = '/agile.html'>agile</a></li>

<li class = 'item'><a href = 'http://refactoring.com'>refactoring</a></li>

<li class = 'item'><a href = '/design.html'>design</a></li>

<li class = 'item'><a href = '/nosql.html'>noSQL</a></li>

<li class = 'item'><a href = '/dsl.html'>DSL</a></li>

<li class = 'item'><a href = '/delivery.html'>continuous delivery</a></li>

<li class = 'item'><a href = '/microservices'>microservices</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>media</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = '/books'>books</a></li>

<li class = 'item'><a href = '/videos.html'>video</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>site</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = '/intro.html'>site introduction</a></li>

<li class = 'item'><a href = '/aboutMe.html'>about me</a></li>

<li class = 'item'><a href = '/faq.html'>FAQ</a></li>

<li class = 'item'><a href = '/tags'>content index</a></li>

<li class = 'item'><a href = '/photos'>photos</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>catalogs</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = 'http://refactoring.com/catalog'>refactoring</a></li>

<li class = 'item'><a href = '/eaaCatalog'>P of EAA</a></li>

<li class = 'item'><a href = '/eaaDev'>EAA dev</a></li>

<li class = 'item'><a href = '/dslCatalog'>DSL</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>feeds</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = 'http://www.twitter.com/martinfowler'>twitter</a></li>

<li class = 'item'><a href = '/feed.atom'>rss</a></li>

<li class = 'item'><a href = 'https://www.facebook.com/martinFowlerThoughtWorks'>facebook</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>popular</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = '/articles/microservices.html'>microservices</a></li>

<li class = 'item'><a href = '/articles/injection.html'>dependency injection</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>ThoughtWorks</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = 'http://thoughtworks.com/blogs'>blogs</a></li>

<li class = 'item'><a href = 'http://thoughtworks.com/careers'>careers</a></li>

<li class = 'item'><a href = 'https://www.thoughtworks.com/products'>products</a></li>
</ul>
</li>
</ul>
</div>

<div id = 'content'>
<div id = 'main'>
<h1><a href = BlueGreenDeployment.html>BlueGreenDeployment</a></h1>

<div class = 'author-date'>
<p class = 'author-photo'><a href = '/'><img src = '/mf.jpg' title = 'Photo of Martin Fowler'></img></a></p>

<p class = 'author'><a href = '/' rel = 'author'>Martin Fowler</a></p>

<p class = 'date'>1 March 2010</p>
</div>

<p class = 'tags'><a href = '/tags/continuous delivery.html'>continuous delivery</a></p>

<p class = 'tagLabel'>tags:</p>

<div class = 'clear'></div>

<p>One of the goals that my colleagues and I urge on our clients is
  that of a completely automated deployment process. Automating your
  deployment helps reduce the frictions and delays that crop up in
  between getting the software "done" and getting it to realize its
  value. Dave Farley and Jez Humble are finishing up a book on this topic
  - <a href = '/books/continuousDelivery.html'>Continuous
  Delivery</a>. It builds upon many of the ideas that are commonly
  associated with <a href = '/articles/continuousIntegration.html'>Continuous
  Integration</a>, driving more towards this ability to rapidly put
  software into production and get it doing something. Their section
  on blue-green deployment caught my eye as one of those techniques
  that's underused, so I thought I'd give a brief overview of it here.</p>

<div class = 'fullPhoto '><img src = 'images/blueGreenDeployment/blue_green_deployments.png'></img>
<p class = 'photoCaption'></p>
</div>

<div class = 'clear'></div>

<p>One of the challenges with automating deployment is the cut-over
  itself, taking software from the final stage of testing to live
  production. You usually need to do this quickly in order to minimize
  downtime. The blue-green deployment approach does this by ensuring
  you have two production environments, as identical as possible. At
  any time one of them, let's say blue for the example, is live. As you
  prepare a new release of your software you do your final stage of
  testing in the green environment. Once the software is working in the
  green environment, you switch the router so that all incoming
  requests go to the green environment - the blue one is now idle.</p>

<p>Blue-green deployment also gives you a rapid way to rollback - if
  anything goes wrong you switch the router back to your blue
  environment. There's still the issue of dealing with missed
  transactions while the green environment was live, but depending on
  your design you may be able to feed transactions to both
  environments in such a way as to keep the blue environment as a
  backup when the green is live. Or you may be able to put the application
  in read-only mode before cut-over, run it for a while in read-only
  mode, and then switch it to read-write mode. That may be enough to
  flush out many outstanding issues.</p>

<p>The two environments need to be different but as identical as
  possible. In some situations they can be different pieces of
  hardware, or they can be different virtual machines running on the
  same (or different) hardware. They can also be a single operating
  environment partitioned into separate zones with separate IP
  addresses for the two slices.</p>

<p>Once you've put your green environment live and you're happy with
  its stability, you then use the blue environment as your staging
  environment for the final testing step for your next deployment.
  When you are ready for your next release, you switch from green to
  blue in the same way that you did from blue to green earlier. That
  way both green and blue environments are regularly cycling between live, previous
  version (for rollback) and staging the next version.</p>

<p>An advantage of this approach is that it's the same basic
  mechanism as you need to get a hot-standby working. Hence this
  allows you to test your disaster-recovery procedure on every
  release. (I hope that you release more frequently than you have a
  disaster.)</p>

<p>The fundamental idea is to have two easily switchable
  environments to switch between, there are plenty of ways to vary the
  details. One project did the switch by bouncing the web server
  rather than working on the router. Another variation would be to use
  the same database, making the blue-green switches for web and domain
  layers.</p>

<p>Databases can often be a challenge with this technique,
  particularly when you need to change the schema to support a new
  version of the software. The trick is to separate the deployment of
  schema changes from application upgrades. So first apply a <a href = '/books/refactoringDatabases.html'>database refactoring</a> to
  change the schema to support both the new and old version of the
  application, deploy that, check everything is working fine so you
  have a rollback point, then deploy the new version of the
  application. (And when the upgrade has bedded
  down remove the database support for the old version.)
  </p>

<p>This technique has been "out there" for ages, but I don't see it
  used as often as it should be. Some foggy combination of <a href = 'http://dannorth.net/'>Dan North</a> and Jez Humble came up with the
  name.</p>

<div class = 'furtherReading'>
<h2>Further Reading</h2>

<p>You can find much more detail on this and related techniques
    from the <a href = '/books/continuousDelivery.html'>Continuous
    Delivery book</a> by Jez Humble and Dave Farley. My <a href = '/delivery.html'>guide page on
    delivery</a> points to more material on these topcis.</p>
</div>

<div class = 'acknowledgements'>
<h2>Acknowledgements</h2>

    Illustration by Ketan Padegaonkar
  </div>

<div class = 'appendix'>
<div id = 'Updates'><hr class = 'topSection'></hr>
<h2>Updates</h2>

<p>2015-06-05: The page got a lot more page traffic today as
      Hacker News noticed it. So I added a paragraph on database
      changes and the further reading section.</p>
</div>
</div>

<div class = 'shares'>
<div class = 'icons'><span class = 'label'>Share:</span><a href = 'https://twitter.com/intent/tweet?url=https://martinfowler.com/bliki/BlueGreenDeployment.html&amp;text=Bliki: BlueGreenDeployment ➙ ' title = 'Share on Twitter'><img src = '/t_mini-a.png'></img></a><a href = 'https://facebook.com/sharer.php?u=https://martinfowler.com/bliki/BlueGreenDeployment.html' title = 'Share on Facebook'><img src = '/fb-icon-20.png'></img></a><a href = 'https://plus.google.com/share?url=https://martinfowler.com/bliki/BlueGreenDeployment.html' title = 'Share on Google Plus'><img src = '/gplus-16.png'></img></a></div>

<div class = 'comment'>if you found this article useful, please share it. I appreciate the feedback and encouragement</div>
</div>

<div class = 'clear'></div>
</div>

<div class = 'similar-sidebar'>
<h2>Find similar articles at the tag</h2>

<p class = 'tags'><a href = '/tags/continuous delivery.html'>continuous delivery</a></p>
</div>

<div class = 'clear'></div>
</div>

<div class = 'div' id = 'bottom-navmenu'>
<ul class = 'navmenu'>
<li class = 'top-line'><a class = 'link-home' href = '/'>home</a>  <div class = 'search'>
    <!-- SiteSearch Google -->
    <form method='GET' action="https://www.google.com/search">
      <input type='hidden' name='ie' value='UTF-8'/>
      <input type='hidden' name='oe' value='UTF-8'/>
      <input class = 'field' type='text' 
             name='q' size='15' maxlength='255' value=""/>
      <button class = 'button' type='submit' 
             name='btnG' value=" " title = "Search"/>
      <input type='hidden' name='domains' value="martinfowler.com"/>
      <input type='hidden' name='sitesearch' value=""/> 
      <input
          type='hidden' name='sitesearch' value="martinfowler.com"/>
    </form>
  </div>

<span class = 'close' title = 'close'></span>
</li>

<li class = 'group'><span class = 'group-label'>topics</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = '/agile.html'>agile</a></li>

<li class = 'item'><a href = 'http://refactoring.com'>refactoring</a></li>

<li class = 'item'><a href = '/design.html'>design</a></li>

<li class = 'item'><a href = '/nosql.html'>noSQL</a></li>

<li class = 'item'><a href = '/dsl.html'>DSL</a></li>

<li class = 'item'><a href = '/delivery.html'>continuous delivery</a></li>

<li class = 'item'><a href = '/microservices'>microservices</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>media</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = '/books'>books</a></li>

<li class = 'item'><a href = '/videos.html'>video</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>site</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = '/intro.html'>site introduction</a></li>

<li class = 'item'><a href = '/aboutMe.html'>about me</a></li>

<li class = 'item'><a href = '/faq.html'>FAQ</a></li>

<li class = 'item'><a href = '/tags'>content index</a></li>

<li class = 'item'><a href = '/photos'>photos</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>catalogs</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = 'http://refactoring.com/catalog'>refactoring</a></li>

<li class = 'item'><a href = '/eaaCatalog'>P of EAA</a></li>

<li class = 'item'><a href = '/eaaDev'>EAA dev</a></li>

<li class = 'item'><a href = '/dslCatalog'>DSL</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>feeds</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = 'http://www.twitter.com/martinfowler'>twitter</a></li>

<li class = 'item'><a href = '/feed.atom'>rss</a></li>

<li class = 'item'><a href = 'https://www.facebook.com/martinFowlerThoughtWorks'>facebook</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>popular</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = '/articles/microservices.html'>microservices</a></li>

<li class = 'item'><a href = '/articles/injection.html'>dependency injection</a></li>
</ul>
</li>

<li class = 'group'><span class = 'group-label'>ThoughtWorks</span>
<ul class = 'group-contents'>
<li class = 'item'><a href = 'http://thoughtworks.com/blogs'>blogs</a></li>

<li class = 'item'><a href = 'http://thoughtworks.com/careers'>careers</a></li>

<li class = 'item'><a href = 'https://www.thoughtworks.com/products'>products</a></li>
</ul>
</li>
</ul>
</div>
<div id='footer'>
  <div class='tw-logo'>
    <a href='http://www.thoughtworks.com'>
      <img src='/TW_smb.jpg'>
    </a>
  </div>
  <div class='menu-button'>
    <div class='icon-bars navmenu-button'></div>
  </div>
  <div class='copyright'>
    <p>© Martin Fowler | <a href="http://www.thoughtworks.com/privacy-policy">Privacy Policy</a> | <a href="/aboutMe.html#disclosures">Disclosures</a></p>
  </div>
</div>
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-17005812-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->

<script src = '/jquery-1.11.3.min.js' type = 'text/javascript'></script>

<script src = '/mfcom.js' type = 'text/javascript'></script>
</body>
</html>
